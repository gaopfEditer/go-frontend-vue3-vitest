# Vitest æµ‹è¯•åŸç†è§£æï¼šå¦‚ä½•æ¨¡æ‹ŸçœŸå®ç”¨æˆ·æ“ä½œ

## ğŸ¯ æ ¸å¿ƒé—®é¢˜

**Q: æµ‹è¯•å¦‚ä½•ä¿è¯çœŸå®ä½œç”¨åˆ°ç•Œé¢ä¸Šï¼Ÿ**

**A: é€šè¿‡æ¨¡æ‹ŸçœŸå®çš„ DOM ç¯å¢ƒã€ç”¨æˆ·äº¤äº’å’Œ API è°ƒç”¨ï¼**

## ä¸€ã€æµ‹è¯•ç¯å¢ƒæ­å»ºåŸç†

### 1. jsdom ç¯å¢ƒæ¨¡æ‹Ÿ

```javascript
// tests/setup.js
import { vi } from 'vitest'

// vitest é…ç½®ä¸­å¯ç”¨ jsdom
test: {
  environment: 'jsdom'  // ğŸ‘ˆ å…³é”®é…ç½®
}
```

**åŸç†è¯´æ˜ï¼š**
- **jsdom** æ˜¯ä¸€ä¸ªçº¯ JavaScript å®ç°çš„ DOM ç¯å¢ƒ
- å®ƒåœ¨ Node.js ç¯å¢ƒä¸­æ¨¡æ‹Ÿäº†æµè§ˆå™¨çš„ DOM API
- è®©æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æµ‹è¯• Vue ç»„ä»¶

**å®é™…æ•ˆæœï¼š**
```javascript
// âœ… è¿™äº›æµè§ˆå™¨ API éƒ½å¯ä»¥ç”¨ï¼
document.createElement('div')     // åˆ›å»ºå…ƒç´ 
document.querySelector('#id')    // æŸ¥æ‰¾å…ƒç´ 
window.localStorage              // æœ¬åœ°å­˜å‚¨
```

### 2. çœŸå®çš„ DOM æ ‘

å½“æµ‹è¯•è¿è¡Œæ—¶ï¼š

```javascript
// 1. ç»„ä»¶æŒ‚è½½åˆ°å†…å­˜ä¸­çš„ DOM
const wrapper = mount(Login)

// 2. Vue Test Utils åˆ›å»ºçœŸå®çš„ DOM æ ‘
// å†…å­˜ä¸­çš„ HTMLï¼š
<div class="login-container">
  <input id="email" />
  <input id="password" />
  <button class="login-button">ç™»å½•</button>
</div>

// 3. è¿™ä¸ª DOM æ˜¯å®Œå…¨å¯æ“ä½œçš„ï¼
wrapper.find('#email')           // çœŸèƒ½æ‰¾åˆ°
wrapper.find('button').exists()  // çœŸèƒ½æ£€æŸ¥
```

## äºŒã€UI æµ‹è¯•åŸç†ï¼šå¦‚ä½•æ£€æŸ¥ç•Œé¢å…ƒç´ 

### 1. å…ƒç´ å­˜åœ¨æ€§æ£€æµ‹

```javascript
it('åº”è¯¥æ˜¾ç¤ºé‚®ç®±è¾“å…¥æ¡†', () => {
  const wrapper = mount(Login)
  
  // Vue Test Utils è§£æç»„ä»¶ï¼Œç”ŸæˆçœŸå® DOM
  const emailInput = wrapper.find('#email')
  
  // âœ… è¿™å°±åƒçœŸå®æµè§ˆå™¨ä¸­æ‰§è¡Œï¼š
  // document.getElementById('email')
  
  expect(emailInput.exists()).toBe(true)
})
```

**åŸç†å›¾è§£ï¼š**

```
æµ‹è¯•ä»£ç                          çœŸå®æ“ä½œ
  â†“                                â†“
find('#email') â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ DOMä¸­æŸ¥æ‰¾å…ƒç´ 
  â†“                                â†“
exists() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å…ƒç´ ç¡®å®å­˜åœ¨
  â†“                                â†“
expect(true) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ æ–­è¨€é€šè¿‡
```

### 2. æ–‡æœ¬å†…å®¹æ£€æµ‹

```javascript
it('åº”è¯¥æ˜¾ç¤ºç™»å½•æ ‡é¢˜', () => {
  const wrapper = mount(Login)
  
  // è·å– DOM èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹
  const text = wrapper.text()
  
  // è¿™ç­‰åŒäºæµè§ˆå™¨ä¸­çš„ï¼š
  // document.body.innerText
  
  expect(text).toContain('ç™»å½•')
})
```

**å®é™… DOM æ“ä½œï¼š**

```javascript
// ç»„ä»¶æ¸²æŸ“åçš„çœŸå® DOMï¼š
<div class="login-header">
  <h2>ç™»å½•</h2>  // ğŸ‘ˆ è¿™ä¸ªæ–‡æœ¬çœŸå®å­˜åœ¨
</div>

// wrapper.text() æå–æ‰€æœ‰æ–‡æœ¬
// ç»“æœï¼š"ç™»å½•"
```

### 3. æ ·å¼æ£€æµ‹

```javascript
it('åº”è¯¥åº”ç”¨æ­£ç¡®çš„CSSç±»', () => {
  const wrapper = mount(Login)
  const container = wrapper.find('.login-container')
  
  // æ£€æµ‹ç±»å
  expect(container.classes()).toContain('login-container')
  
  // è¿™å°±æ˜¯çœŸå®æµè§ˆå™¨ä¸­ï¼š
  // element.classList.contains('login-container')
})
```

## ä¸‰ã€ç”¨æˆ·è¾“å…¥æ¨¡æ‹ŸåŸç†

### 1. è¾“å…¥äº‹ä»¶çš„çœŸå®æ¨¡æ‹Ÿ

```javascript
it('åº”è¯¥èƒ½å¤Ÿè¾“å…¥é‚®ç®±', async () => {
  const wrapper = mount(Login)
  const emailInput = wrapper.find('#email')
  
  // æ¨¡æ‹ŸçœŸå®çš„è¾“å…¥äº‹ä»¶
  await emailInput.setValue('test@example.com')
  
  // ğŸ‘‡ å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
  // 1. è§¦å‘ input äº‹ä»¶
  // 2. æ›´æ–° v-model ç»‘å®šçš„å€¼
  // 3. è§¦å‘ Vue çš„å“åº”å¼æ›´æ–°
  // 4. ç»„ä»¶çŠ¶æ€åŒæ­¥æ›´æ–°
  
  expect(wrapper.vm.form.email).toBe('test@example.com')
})
```

**äº‹ä»¶æµç¨‹è¯¦è§£ï¼š**

```javascript
// æ­¥éª¤ 1ï¼šæ¨¡æ‹Ÿç”¨æˆ·è¾“å…¥
await emailInput.setValue('test@example.com')

// æ­¥éª¤ 2ï¼šVue Test Utils è§¦å‘äº‹ä»¶
inputElement.value = 'test@example.com'
inputElement.dispatchEvent(new Event('input'))

// æ­¥éª¤ 3ï¼šVue çš„å“åº”å¼ç³»ç»Ÿå·¥ä½œ
// Login.vue ä¸­ï¼š
const form = reactive({
  email: '',  // ğŸ‘ˆ è¿™ä¸ªå€¼ä¼šæ›´æ–°
  password: ''
})

// v-model åŒå‘ç»‘å®šï¼š
// <input v-model="form.email" />
// ç­‰äºï¼š
// <input @input="form.email = $event.target.value" />

// æ­¥éª¤ 4ï¼šéªŒè¯çŠ¶æ€å·²æ›´æ–°
expect(wrapper.vm.form.email).toBe('test@example.com')  // âœ…
```

### 2. çœŸå®çš„æ•°æ®æµ

```javascript
// æµ‹è¯•ä»£ç 
it('åº”è¯¥å®æ—¶æ›´æ–°è¡¨å•æ•°æ®', async () => {
  wrapper = mount(Login)
  
  // è¾“å…¥é‚®ç®±
  await wrapper.find('#email').setValue('user@example.com')
  
  // ğŸ‘‡ è¿™é‡Œå‘ç”Ÿäº†çœŸå®çš„æ•°æ®ç»‘å®šï¼
  // template: <input v-model="form.email" />
  // script: const form = reactive({ email: '' })
  
  // âœ… Vue çš„å“åº”å¼ç³»ç»Ÿç¡®ä¿ï¼š
  // è¾“å…¥æ¡†å€¼å˜åŒ– â†’ v-model è§¦å‘ â†’ form.email æ›´æ–°
  
  expect(wrapper.vm.form.email).toBe('user@example.com')
})
```

**æ•°æ®æµå›¾è§£ï¼š**

```
ç”¨æˆ·è¾“å…¥ "user@example.com"
        â†“
è§¦å‘ input äº‹ä»¶
        â†“
v-model æ•è·äº‹ä»¶
        â†“
æ›´æ–° form.email
        â†“
Vue å“åº”å¼ç³»ç»Ÿå·¥ä½œ
        â†“
DOM è‡ªåŠ¨æ›´æ–°ï¼ˆå¦‚æœç»‘å®šåˆ°å…¶ä»–åœ°æ–¹ï¼‰
        â†“
éªŒè¯ form.email === 'user@example.com'  âœ…
```

## å››ã€è¡¨å•éªŒè¯åŸç†

### 1. HTML5 åŸç”ŸéªŒè¯

```javascript
it('åº”è¯¥éªŒè¯é‚®ç®±æ ¼å¼', async () => {
  wrapper = mount(Login)
  const emailInput = wrapper.find('#email')
  
  await emailInput.setValue('invalid-email')
  
  // ğŸ‘‡ è·å–çœŸå®çš„ DOM å…ƒç´ 
  const element = emailInput.element
  
  // è¿™æ˜¯çœŸå®çš„ HTML5 éªŒè¯ï¼
  expect(element.validity.valid).toBe(false)
})
```

**åŸç†è¯´æ˜ï¼š**

```javascript
// Login.vue ä¸­ï¼š
<input
  type="email"        // ğŸ‘ˆ HTML5 ç±»å‹éªŒè¯
  id="email"
  v-model="form.email"
  required            // ğŸ‘ˆ å¿…å¡«éªŒè¯
/>

// å½“è¾“å…¥ 'invalid-email' æ—¶ï¼š
// æµè§ˆå™¨ï¼ˆæˆ– jsdomï¼‰ä¼šéªŒè¯
// è¿”å› validity.valid = false
// å› ä¸ºä¸ç¬¦åˆé‚®ç®±æ ¼å¼
```

### 2. è‡ªå®šä¹‰éªŒè¯é€»è¾‘

```javascript
it('åº”è¯¥éªŒè¯å¯†ç åŒ¹é…', async () => {
  wrapper = mount(Login)
  
  // åˆ‡æ¢åˆ°æ³¨å†Œæ¨¡å¼
  await wrapper.vm.toggleMode()
  
  // è®¾ç½®ä¸åŒå¯†ç 
  wrapper.vm.form.password = 'password123'
  wrapper.vm.form.confirmPassword = 'password456'
  
  // æäº¤è¡¨å•
  await wrapper.vm.handleSubmit()
  
  // ğŸ‘‡ å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
  // Login.vue ä¸­çš„ handleSubmit æ–¹æ³•ï¼š
  if (!isLogin.value && form.password !== form.confirmPassword) {
    message.error(t('register.passwordMismatch'))
    return  // ğŸ‘ˆ è¿™é‡Œä¼šè¿”å›
  }
  
  // âœ… éªŒè¯å¤±è´¥ï¼Œä¸ç»§ç»­æ‰§è¡Œ
  expect(mockMessage.error).toHaveBeenCalled()
  expect(mockStore.login).not.toHaveBeenCalled()
})
```

**éªŒè¯æµç¨‹è¯¦è§£ï¼š**

```javascript
// 1. ç”¨æˆ·è¾“å…¥
form.password = 'password123'
form.confirmPassword = 'password456'

// 2. ç‚¹å‡»æäº¤æŒ‰é’®
await wrapper.vm.handleSubmit()

// 3. æ‰§è¡ŒéªŒè¯é€»è¾‘ï¼ˆLogin.vueï¼‰
if (!isLogin.value && form.password !== form.confirmPassword) {
  // ğŸ‘ˆ æ¡ä»¶æ»¡è¶³ï¼
  message.error(t('register.passwordMismatch'))  // âœ… è¢«è°ƒç”¨
  return  // ğŸ‘ˆ æå‰è¿”å›
}

// 4. éªŒè¯å¤±è´¥ï¼Œåç»­ä»£ç ä¸æ‰§è¡Œ
// store.login() âŒ ä¸è¢«è°ƒç”¨
```

## äº”ã€API æ¥å£æ¨¡æ‹ŸåŸç†

### 1. Mock æ›¿æ¢çœŸå® API

```javascript
// åœ¨æµ‹è¯•æ–‡ä»¶é¡¶éƒ¨
vi.mock('../src/utils/api', () => ({
  auth: {
    register: vi.fn(),  // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå‡½æ•°
    login: vi.fn()
  }
}))

// ä½¿ç”¨ Mock
const mockAuth = {
  register: vi.fn(() => Promise.resolve({})),
  login: vi.fn(() => Promise.resolve({}))
}
```

**åŸç†è¯´æ˜ï¼š**

```javascript
// å½“ç»„ä»¶è°ƒç”¨ API æ—¶ï¼š
import { auth } from '../utils/api'

// çœŸå®ç¯å¢ƒï¼š
auth.login(form)  // â†’ å‘é€ HTTP è¯·æ±‚åˆ°æœåŠ¡å™¨

// æµ‹è¯•ç¯å¢ƒï¼š
auth.login(form)  // â†’ è°ƒç”¨ mock å‡½æ•°
                 // â†’ ç«‹å³è¿”å›æ¨¡æ‹Ÿæ•°æ®
                 // â†’ ä¸å‘é€çœŸå®è¯·æ±‚
```

### 2. æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ

```javascript
it('åº”è¯¥å¤„ç†ç™»å½•æˆåŠŸ', async () => {
  // è®¾ç½® Mock è¿”å›æˆåŠŸ
  mockStore.login = vi.fn(() => Promise.resolve({
    data: { code: 200, message: 'success' }
  }))
  
  wrapper.vm.form.email = 'user@example.com'
  wrapper.vm.form.password = 'password'
  
  // è°ƒç”¨çœŸå®çš„ç»„ä»¶æ–¹æ³•
  await wrapper.vm.handleSubmit()
  
  // ğŸ‘‡ å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
  // 1. handleSubmit() è¢«è°ƒç”¨
  // 2. è°ƒç”¨ store.login()
  // 3. Mock å‡½æ•°è¢«è°ƒç”¨ï¼ˆä¸æ˜¯çœŸå® APIï¼‰
  // 4. è¿”å›æ¨¡æ‹Ÿçš„æˆåŠŸæ•°æ®
  // 5. æ›´æ–°ç»„ä»¶çŠ¶æ€
  
  expect(mockStore.login).toHaveBeenCalled()
})
```

**å®Œæ•´æµç¨‹ï¼š**

```javascript
// ç”¨æˆ·ç‚¹å‡»ç™»å½•æŒ‰é’®
await wrapper.vm.handleSubmit()

// â†“ æ‰§è¡Œ Login.vue ä¸­çš„ä»£ç 
loading.value = true
try {
  await store.login(form)  // ğŸ‘ˆ è¿™é‡Œè°ƒç”¨
    
  // â†“ store.login è¢« Mock æ›¿æ¢
  mockStore.login()         // ğŸ‘ˆ Mock å‡½æ•°
  
  // â†“ è¿”å›æ¨¡æ‹Ÿæ•°æ®
  return { data: { code: 200 } }
  
  // â†“ ç»§ç»­æ‰§è¡Œ
  await router.push('/')
} catch (err) {
  message.error(err.message)
} finally {
  loading.value = false
}
```

## å…­ã€å¦‚ä½•ä¿è¯çœŸå®ä½œç”¨åˆ°ç•Œé¢

### 1. å®Œæ•´çš„ DOM æ¸²æŸ“

```javascript
// Vue Test Utils ä½¿ç”¨çœŸå®çš„ Vue æ¸²æŸ“å¼•æ“
const wrapper = mount(Login)

// ç­‰åŒäºï¼š
// 1. åˆ›å»º Vue åº”ç”¨å®ä¾‹
// 2. ç¼–è¯‘æ¨¡æ¿
// 3. åˆ›å»ºç»„ä»¶å®ä¾‹
// 4. æ¸²æŸ“åˆ°è™šæ‹Ÿ DOM
// 5. è½¬æ¢ä¸ºçœŸå® DOMï¼ˆé€šè¿‡ jsdomï¼‰

// ç»“æœï¼šçœŸå®çš„ DOM æ ‘
const emailInput = wrapper.find('#email')
// âœ… è¿™æ˜¯çœŸå®çš„ DOM å…ƒç´ ï¼Œä¸æ˜¯å‡çš„ï¼
```

### 2. çœŸå®çš„å“åº”å¼ç³»ç»Ÿ

```javascript
// Vue çš„å“åº”å¼ç³»ç»Ÿå®Œå…¨å·¥ä½œ
const form = reactive({ email: '' })

// å½“è¾“å…¥å˜åŒ–æ—¶ï¼š
await emailInput.setValue('test@example.com')

// Vue ä¼šï¼š
// 1. æ£€æµ‹åˆ°å˜åŒ–
// 2. è§¦å‘ä¾èµ–
// 3. æ›´æ–°æ‰€æœ‰å¼•ç”¨
// 4. é‡æ–°æ¸²æŸ“å¿…è¦çš„éƒ¨åˆ†

expect(wrapper.vm.form.email).toBe('test@example.com')
expect(wrapper.html()).toContain('test@example.com')  // âœ… çœŸæ›´æ–°äº†
```

### 3. çœŸå®çš„äº‹ä»¶ç³»ç»Ÿ

```javascript
// ç‚¹å‡»æŒ‰é’®
await wrapper.find('button').trigger('click')

// ç­‰åŒäºæµè§ˆå™¨ä¸­ï¼š
buttonElement.click()

// ä¼šè§¦å‘ï¼š
// 1. click äº‹ä»¶
// 2. äº‹ä»¶å¤„ç†å™¨
// 3. Vue çš„æ–¹æ³•è°ƒç”¨
// 4. çŠ¶æ€æ›´æ–°
// 5. è§†å›¾æ›´æ–°
```

## ä¸ƒã€å®é™…æµ‹è¯•ç¤ºä¾‹

### å®Œæ•´çš„ç”¨æˆ·ç™»å½•æµç¨‹

```javascript
it('åº”è¯¥å®Œæˆå®Œæ•´çš„ç™»å½•æµç¨‹', async () => {
  // æ­¥éª¤ 1: æ¸²æŸ“çœŸå®ç»„ä»¶
  wrapper = mount(Login, {
    global: {
      plugins: [pinia, i18n, ElementPlus]  // çœŸå®çš„æ’ä»¶
    }
  })
  
  // æ­¥éª¤ 2: éªŒè¯é¡µé¢å…ƒç´ ï¼ˆçœŸå® DOMï¼‰
  expect(wrapper.find('#email').exists()).toBe(true)
  expect(wrapper.find('#password').exists()).toBe(true)
  
  // æ­¥éª¤ 3: è¾“å…¥é‚®ç®±ï¼ˆçœŸå®è¾“å…¥äº‹ä»¶ï¼‰
  const emailInput = wrapper.find('#email')
  await emailInput.setValue('user@example.com')
  
  // ğŸ‘‡ éªŒè¯çœŸå®ä½œç”¨åˆ°è¡¨å•
  expect(wrapper.vm.form.email).toBe('user@example.com')
  expect(emailInput.element.value).toBe('user@example.com')  // âœ… çœŸæ›´æ–°äº†
  
  // æ­¥éª¤ 4: è¾“å…¥å¯†ç ï¼ˆçœŸå®è¾“å…¥äº‹ä»¶ï¼‰
  const passwordInput = wrapper.find('#password')
  await passwordInput.setValue('password123')
  
  // ğŸ‘‡ éªŒè¯çœŸå®æ›´æ–°
  expect(wrapper.vm.form.password).toBe('password123')
  
  // æ­¥éª¤ 5: ç‚¹å‡»ç™»å½•ï¼ˆçœŸå®ç‚¹å‡»äº‹ä»¶ï¼‰
  const button = wrapper.find('.login-button')
  await button.trigger('click')
  
  // æ­¥éª¤ 6: éªŒè¯çœŸå®è°ƒç”¨
  expect(mockStore.login).toHaveBeenCalledWith({
    email: 'user@example.com',
    password: 'password123'
  })
  
  // æ­¥éª¤ 7: éªŒè¯çŠ¶æ€æ›´æ–°
  expect(wrapper.vm.loading).toBe(false)
})
```

### æ¨¡å¼åˆ‡æ¢çš„çœŸå®æ•ˆæœ

```javascript
it('åº”è¯¥åœ¨åˆ‡æ¢æ—¶æ¸…ç©ºè¡¨å•', async () => {
  wrapper = mount(Login)
  
  // å…ˆå¡«å…¥æ•°æ®
  wrapper.vm.form.email = 'test@example.com'
  wrapper.vm.form.password = 'password123'
  
  // åˆ‡æ¢æ¨¡å¼
  await wrapper.vm.toggleMode()
  
  // ğŸ‘‡ éªŒè¯çœŸå®æ¸…ç©º
  expect(wrapper.vm.form.email).toBe('')          // âœ… çœŸæ¸…ç©ºäº†
  expect(wrapper.vm.form.password).toBe('')       // âœ… çœŸæ¸…ç©ºäº†
  expect(wrapper.vm.form.confirmPassword).toBe('') // âœ… çœŸæ¸…ç©ºäº†
  expect(wrapper.vm.isLogin).toBe(false)           // âœ… çœŸåˆ‡æ¢äº†
  
  // éªŒè¯ DOM ä¹Ÿæ›´æ–°äº†
  expect(wrapper.text()).toContain('æ³¨å†Œ')        // âœ… æ ‡é¢˜å˜äº†
  expect(wrapper.find('#password').exists()).toBe(true)
})
```

## å…«ã€æµ‹è¯• vs çœŸå®æµè§ˆå™¨çš„å¯¹æ¯”

| åŠŸèƒ½ | æµè§ˆå™¨ | æµ‹è¯•ç¯å¢ƒ | è¯´æ˜ |
|------|--------|---------|------|
| DOM API | âœ… çœŸå® | âœ… jsdom æ¨¡æ‹Ÿ | å®Œå…¨å¯ç”¨ |
| äº‹ä»¶ç³»ç»Ÿ | âœ… çœŸå® | âœ… çœŸå®è§¦å‘ | äº‹ä»¶å¤„ç†å™¨éƒ½å·¥ä½œ |
| å“åº”å¼ç³»ç»Ÿ | âœ… Vue | âœ… Vue | åŒä¸€ä¸ª Vue |
| API è°ƒç”¨ | âœ… çœŸå®è¯·æ±‚ | âŒ Mock | æµ‹è¯•æ—¶ä¸å‘è¯·æ±‚ |
| çŠ¶æ€ç®¡ç† | âœ… Pinia | âœ… Pinia | åŒä¸€ä¸ª Pinia |
| è·¯ç”± | âœ… Vue Router | âŒ Mock | è·¯ç”±è·³è½¬è¢« Mock |

## ä¹ã€å¦‚ä½•ç¡®ä¿æµ‹è¯•çœŸå®æ€§

### 1. ä½¿ç”¨çœŸå®çš„ç»„ä»¶å®ä¾‹

```javascript
// âœ… å¥½ï¼šçœŸå®çš„ç»„ä»¶
const wrapper = mount(Login, {
  global: {
    plugins: [pinia, i18n, ElementPlus]
  }
})

// âŒ ä¸å¥½ï¼šåªæµ‹è¯•æ–¹æ³•
wrapper.vm.switchLang('en')  // ç»•è¿‡ UI
```

### 2. æµ‹è¯•çœŸå®çš„ç”¨æˆ·è·¯å¾„

```javascript
// âœ… å¥½ï¼šå®Œæ•´çš„ç”¨æˆ·æ“ä½œ
await wrapper.find('#email').setValue('user@example.com')
await wrapper.find('button').trigger('click')

// âŒ ä¸å¥½ï¼šç›´æ¥è°ƒç”¨æ–¹æ³•
wrapper.vm.handleSubmit()
```

### 3. éªŒè¯çœŸå®çš„ç»“æœ

```javascript
// âœ… å¥½ï¼šæ£€æŸ¥ DOM å’ŒçŠ¶æ€
expect(wrapper.find('.error').exists()).toBe(true)
expect(wrapper.vm.loading).toBe(false)

// âŒ ä¸å¥½ï¼šåªæ£€æŸ¥è°ƒç”¨
expect(mockStore.login).toHaveBeenCalled()
```

## åã€æ€»ç»“

### æµ‹è¯•å¦‚ä½•ä¿è¯çœŸå®æ€§ï¼Ÿ

1. **çœŸå® DOM** - jsdom æä¾›çœŸå® DOM API
2. **çœŸå® Vue** - ä½¿ç”¨çœŸå®çš„ Vue æ¸²æŸ“å¼•æ“
3. **çœŸå®äº‹ä»¶** - è§¦å‘çœŸå®çš„äº‹ä»¶
4. **çœŸå®å“åº”å¼** - Vue å“åº”å¼ç³»ç»Ÿå®Œå…¨å·¥ä½œ
5. **Mock éš”ç¦»** - åª Mock å¤–éƒ¨ä¾èµ–ï¼Œå†…éƒ¨é€»è¾‘çœŸå®æ‰§è¡Œ

### æµ‹è¯• = è™šæ‹Ÿæœºä¸­çš„çœŸå®æµè§ˆå™¨

```
æµ‹è¯•ç¯å¢ƒ â‰ˆ æ— ç•Œé¢çš„æµè§ˆå™¨
  - æœ‰çœŸå®çš„ DOM
  - æœ‰çœŸå®çš„äº‹ä»¶
  - æœ‰çœŸå®çš„ Vue
  - åªæ˜¯æ²¡æœ‰çœŸå®çš„åç«¯
  - åªæ˜¯æ²¡æœ‰çœŸå®çš„ç½‘ç»œè¯·æ±‚
```

### æµ‹è¯•å¯ä¿¡åº¦

âœ… **é«˜åº¦å¯ä¿¡**ï¼š
- DOM æ“ä½œæ˜¯çœŸå®çš„
- äº‹ä»¶å¤„ç†æ˜¯çœŸå®çš„
- Vue é€»è¾‘æ˜¯çœŸå®çš„
- ç”¨æˆ·äº¤äº’è·¯å¾„æ˜¯çœŸå®çš„

âš ï¸ **éœ€è¦æ³¨æ„**ï¼š
- API è°ƒĞµĞ¼ÑÑ Mock çš„ï¼ˆä½†è°ƒç”¨é€»è¾‘çœŸå®ï¼‰
- è·¯ç”±è·³è½¬æ˜¯ Mock çš„ï¼ˆä½†è·³è½¬é€»è¾‘çœŸå®ï¼‰
- CSS æ¸²æŸ“å¯èƒ½æœ‰å·®å¼‚ï¼ˆä½†ç»“æ„çœŸå®ï¼‰

**ç»“è®ºï¼šæµ‹è¯•åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹æ˜¯é«˜åº¦å¯ä¿¡çš„ï¼** ğŸ¯

